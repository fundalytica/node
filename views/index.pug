extends layout.pug

block links
    link(href='/stylesheets/animation.css' rel='stylesheet')

block content
    //- section.bg-grey-700
    //-     ul.container.list-unstyled.d-flex.flex-row.flex-wrap.p-1.text-center.text-nowrap.small#quotes

    main#container.p-0
        - var text = 'Join our community on Discord'
        - var url = 'https://discord.gg/WmbyWHxyH6'
        p.p-2.text-center.bg-purple-300.text-white
            a.text-white.text-decoration-underline(href=url)= text
            i.fab.fa-discord.ps-2

        if(just_logged)
            - var text = (just_logged == 'in') ? 'üîë Logged In: Welcome to Fundalytica' : (just_logged == 'out') ? 'üëã Logged Out: See you soon' : '?'
            p.p-2.text-center.bg-light-blue-700.text-white= text

        .d-md-flex.flex-md-row.flex-md-wrap.m-md-3
            //- .topic#welcome.m-3.bg-blue-grey-200
            //-     .p-4
            //-         h2 Fundalytica
            //-         p.lead#description= description

            //-         if(subscription)
            //-             .mb-3
            //-             if(subscription == 'success')
            //-                 p.lead.text-white= 'Thank you for subscribing to Fundalytica ü§ù'
            //-             if(subscription == 'pending')
            //-                 p.lead.text-white.pending= 'Please check your mail and confirm the subscription üëÄ'
            //-         else
            //-             p.mb-2.ms-1
            //-                 span.fas.fa-envelope.pe-1
            //-                 span#join Do not miss any updates. Join now!
            //-             div
            //-                 form(action='https://sendy.fundalytica.com/subscribe' method='POST' accept-charset='utf-8')
            //-                     .input-group
            //-                         input.form-control(type='text' name='email' placeholder='Enter your email')
            //-                         input(type='hidden' name='list' value='YeHtmGHSnDiXFSxu24X9dA')
            //-                         input(type='hidden' name='api_key' value='wCVlWNlmf3YBshY4ek8y')
            //-                         input(type='text' name='hp').d-none
            //-                         .input-group-append
            //-                             button.btn.btn-outline-secondary.rounded-right(type='submit' name='submit') Subscribe

            each topic, index in topics
                - css = topic.color + ' ' + (topic.lottie ? 'ps-4 pe-1 py-4' : 'p-4')
                .topic.m-3(class=css)
                    .d-flex.flex-row
                        //- left segment
                        div
                            p
                                span.hashtag.text-white.bg-dark.rounded.small.p-1= topic.hashtag

                            h2= topic.title

                            //- img.mb-2(src='images/topics/'+topic.image alt=topic.id+' icon')

                            p.lead= topic.description

                            - var href = (! topic.action) ? '#' : ((topic.action == 'route') ? topic.id : topic.action)
                            - var target = ['route','wip'].includes(topic.action) ? '_self' : '_blank'
                            - var button_class = (! topic.action) ? 'disabled' : ''
                            a.btn.btn-outline-light.text-nowrap.py-3.ps-3(class=button_class href=href target=target)= topic.button
                                i.bi.bi-chevron-right.ms-2

                        //- right segment
                        if(topic.lottie)
                            <lottie-player src=#{topic.lottie} background='transparent' speed='1' loop autoplay></lottie-player>

        div.d-flex.flex-column.flex-wrap.justify-content-center.text-center.text-secondary.small.p-1
            p.m-0
                | Icons ‚Ä¢ #[a( href='https://thenounproject.com' ) The Noun Project]
            p.m-0
                | Animations ‚Ä¢ #[a( href='https://lottiefiles.com' ) LottieFiles]
            //- ul
            //-     li Rocket by Adrien Coquet
            //-     li Contract by Alice Design
            //-     li Climber by Rfourtytwo
            //-     li Run by Vladimir Belochkin
            //-     li Income by MRK
            //-     li Report by Komkrit Noenpoempisut
            //-     li Lion by Yu luck

block scripts
    //- script( id='quotesjs' data-api-token=api_token src='/javascripts/quotes.js' type='module')
    //- script(src='https://cdnjs.cloudflare.com/ajax/libs/TypewriterJS/2.13.1/core.min.js')

    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
    script(id='indexjs' src='/javascripts/index.js' data-subscription=subscription data-subscribed-key=subscribed_key type='module')